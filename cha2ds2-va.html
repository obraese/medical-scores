<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CHA₂DS₂-VA & HAS-BLED Rechner</title>

  <link rel="stylesheet" href="style.css">

  <style>
    body { font-family: Arial, sans-serif; margin: 0; line-height: 1.35; }

    .page-wrapper {
      padding: 30px;
      max-width: 900px;
      margin: auto;
    }

    h1 { font-size: 22px; margin: 0 0 10px; }
    h2 { font-size: 18px; margin: 22px 0 10px; }

    .muted { color: #666; font-size: 13px; margin-bottom: 14px; }

    .box {
      border: 1px solid #ccc;
      padding: 16px;
      border-radius: 10px;
      background: #fff;
    }

    .switch {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      padding: 10px 12px;
      border: 1px solid #eee;
      border-radius: 10px;
      margin-bottom: 14px;
      align-items: center;
      background: #fcfcfc;
    }

    .item {
      border: 1px solid #eee;
      padding: 12px 14px;
      border-radius: 10px;
      margin: 12px 0;
      background: #fff;
    }

    .item label {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      cursor: pointer;
    }

    .content { flex: 1; }
    .title { font-weight: bold; margin-bottom: 4px; }
    .explain { font-size: 13px; color: #444; margin-left: 22px; }
    .pts { color: #444; font-size: 13px; white-space: nowrap; margin-left: 10px; }

    .scoreline {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px solid #eee;
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .score { font-size: 30px; font-weight: bold; }

    button {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      background: #fafafa;
      cursor: pointer;
    }

    button:hover { background: #f2f2f2; }

    .copied { font-size: 13px; color: green; }

    .interpret {
      margin-top: 8px;
      font-size: 13px;
      color: #333;
      padding: 10px 12px;
      border: 1px solid #eee;
      border-radius: 10px;
      background: #fcfcfc;
    }

    .band {
      display: grid;
      gap: 10px;
      margin-top: 12px;
    }

    .band-3 { grid-template-columns: repeat(3, 1fr); }
    .band-2 { grid-template-columns: repeat(2, 1fr); }

    .bandbox {
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 10px 12px;
      background: #fafafa;
      font-size: 13px;
      text-align: center;
    }

    .bandbox strong { display:block; margin-bottom: 4px; }

    .band-active {
      background: #eef6ff;
      border: 2px solid #7aa7e6;
      font-size: 15px;
      font-weight: bold;
    }

    .hidden { display: none; }
  </style>
</head>

<body>

<div class="page-wrapper">

<h1>Scores: CHA₂DS₂-VA & HAS-BLED</h1>
<div class="muted">
  Arbeits-/Lernhilfe. Keine Patientendaten speichern. Klinische Entscheidung immer im Kontext.
</div>

<div class="box">

  <div class="switch">
    <strong>Score:</strong>
    <label><input type="radio" name="score_view" id="view_cha" checked> CHA₂DS₂-VA</label>
    <label><input type="radio" name="score_view" id="view_has"> HAS-BLED</label>
    <span style="flex:1;"></span>
    <button id="reset">Alles zurücksetzen</button>
  </div>

  <!-- CHA2DS2-VA -->
  <div id="section_cha">
    <h2>CHA₂DS₂-VA</h2>

    <div class="item"><label><input type="checkbox" id="cha_age65"><div class="content"><div class="title">Alter 65–74 Jahre</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="cha_age75"><div class="content"><div class="title">Alter ≥ 75 Jahre</div></div><span class="pts">+2</span></label></div>
    <div class="item"><label><input type="checkbox" id="cha_c"><div class="content"><div class="title">Herzinsuffizienz / LV-Dysfunktion</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="cha_h"><div class="content"><div class="title">Arterielle Hypertonie</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="cha_d"><div class="content"><div class="title">Diabetes mellitus</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="cha_s2"><div class="content"><div class="title">Schlaganfall / TIA / Embolie</div></div><span class="pts">+2</span></label></div>
    <div class="item"><label><input type="checkbox" id="cha_v"><div class="content"><div class="title">Vaskuläre Erkrankung</div></div><span class="pts">+1</span></label></div>

    <div class="scoreline">
      <div>Score:</div>
      <div class="score" id="cha_result">0</div>
      <button id="cha_copy">CHA₂DS₂-VA kopieren</button>
      <span class="copied" id="cha_copied" style="display:none;">✓ kopiert</span>
    </div>

    <div class="band band-3">
      <div id="cha_band_0" class="bandbox"><strong>0</strong>niedrig</div>
      <div id="cha_band_1" class="bandbox"><strong>1</strong>intermediär</div>
      <div id="cha_band_2plus" class="bandbox"><strong>≥2</strong>erhöht</div>
    </div>

    <div class="interpret" id="cha_interpret"><strong>Interpretation:</strong> —</div>
  </div>

  <!-- HAS-BLED -->
  <div id="section_has" class="hidden">
    <h2>HAS-BLED</h2>

    <div class="item"><label><input type="checkbox" id="has_h"><div class="content"><div class="title">Hypertonie</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_a_renal"><div class="content"><div class="title">Abnorme Nierenfunktion</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_a_liver"><div class="content"><div class="title">Abnorme Leberfunktion</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_s"><div class="content"><div class="title">Schlaganfall</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_b_bleed"><div class="content"><div class="title">Blutung</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_l_inr"><div class="content"><div class="title">Labile INR</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_e"><div class="content"><div class="title">Alter >65</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_d_drugs"><div class="content"><div class="title">Drugs</div></div><span class="pts">+1</span></label></div>
    <div class="item"><label><input type="checkbox" id="has_d_alcohol"><div class="content"><div class="title">Alkohol</div></div><span class="pts">+1</span></label></div>

    <div class="scoreline">
      <div>Score:</div>
      <div class="score" id="has_result">0</div>
      <button id="has_copy">HAS-BLED kopieren</button>
      <span class="copied" id="has_copied" style="display:none;">✓ kopiert</span>
    </div>

    <div class="band band-2">
      <div id="has_band_low" class="bandbox"><strong>0–2</strong>niedrig–moderat</div>
      <div id="has_band_high" class="bandbox"><strong>≥3</strong>erhöht</div>
    </div>

    <div class="interpret" id="has_interpret"><strong>Interpretation:</strong> —</div>
  </div>

</div>
</div>

<script>
function interpretCHA(score){
  if(score===0) return "Niedriges Risiko.";
  if(score===1) return "Intermediäres Risiko.";
  return "Erhöhtes Risiko.";
}
function interpretHAS(score){
  if(score<=2) return "Niedrig–moderat.";
  return "Erhöhtes Blutungsrisiko.";
}
function calculateCHA(){
  let s=0;
  if(cha_age75.checked){ cha_age65.checked=false; s+=2; }
  else if(cha_age65.checked) s+=1;
  if(cha_c.checked) s+=1;
  if(cha_h.checked) s+=1;
  if(cha_d.checked) s+=1;
  if(cha_s2.checked) s+=2;
  if(cha_v.checked) s+=1;
  cha_result.textContent=s;
  cha_interpret.innerHTML="<strong>Interpretation:</strong> "+interpretCHA(s);
}
function calculateHAS(){
  let s=0;
  document.querySelectorAll("#section_has input[type=checkbox]").forEach(cb=>{ if(cb.checked)s++; });
  has_result.textContent=s;
  has_interpret.innerHTML="<strong>Interpretation:</strong> "+interpretHAS(s);
}
function calculateAll(){ calculateCHA(); calculateHAS(); }
document.querySelectorAll("input").forEach(i=>i.addEventListener("change",calculateAll));
view_cha.addEventListener("change",()=>section_cha.classList.remove("hidden"));
view_has.addEventListener("change",()=>section_has.classList.remove("hidden"));
view_cha.addEventListener("change",()=>section_has.classList.add("hidden"));
view_has.addEventListener("change",()=>section_cha.classList.add("hidden"));
reset.addEventListener("click",()=>{ document.querySelectorAll("input[type=checkbox]").forEach(cb=>cb.checked=false); calculateAll(); });
calculateAll();
</script>

<script src="nav.js"></script>

</body>
</html>
